{% extends 'base.html' %}
{% block title %}AWSå­¦ç¿’ã‚³ãƒ³ãƒ†ãƒ³ãƒ„{% endblock %}

{% block content %}
<div class="container py-4">
    <h2 class="mb-4">â˜ï¸ AWSå­¦ç¿’ãƒšãƒ¼ã‚¸</h2>
    <div id="aws-quiz-root"></div>
</div>
{% endblock %}

{% block extra_js %}
<!-- React & Babel CDNï¼ˆé–‹ç™ºç”¨ï¼‰ -->
<script src="https://unpkg.com/react@18/umd/react.development.js"></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
<script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>

{% verbatim %}
<script type="text/babel">
function Question({ data, onAnswer }) {
  const [lang, setLang] = React.useState("ja");
  const [selected, setSelected] = React.useState(null);

  const handleLangChange = (l) => setLang(l);
  const handleChoiceClick = (idx) => {
    setSelected(idx);
    if (onAnswer) onAnswer(idx);
  };

  return (
    <div className="question-container">
      <div className="lang-toggle">
        <button onClick={() => handleLangChange("ja")} disabled={lang === "ja"}>æ—¥æœ¬èª</button>
        <button onClick={() => handleLangChange("en")} disabled={lang === "en"}>English</button>
      </div>
      <p className="question-text">{data.question[lang]}</p>
      <ul>
        {data.choices[lang].map((choice, idx) => (
          <li
            key={idx}
            className={selected === idx ? "selected" : ""}
            onClick={() => handleChoiceClick(idx)}
            style={{ cursor: "pointer" }}
          >
            {choice}
          </li>
        ))}
      </ul>
    </div>
  );
}

const quizData = {
  question: {
    ja: "ä¼šç¤¾ã®é–‹ç™ºãƒãƒ¼ãƒ ãŒS3ãƒã‚±ãƒƒãƒˆã«ä¿å­˜ã—ãŸæ©Ÿå¯†ãƒ‡ãƒ¼ã‚¿ã‚’æš—å·åŒ–ã—ãŸã„ã€‚ã‚­ãƒ¼ã®è‡ªå‹•ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ç°¡å˜ã«è¡Œã†ã«ã¯ã©ã†ã™ã‚‹ï¼Ÿ",
    en: "Your company wants to encrypt sensitive data stored in an S3 bucket. The admin wants automatic key rotation with minimal operational overhead. What should you choose?"
  },
  choices: {
    ja: [
      "AWS KMSã®ãƒãƒãƒ¼ã‚¸ãƒ‰ã‚­ãƒ¼ã‚’ä½¿ç”¨ã™ã‚‹ âœ…",
      "IAMãƒ¦ãƒ¼ã‚¶ãƒ¼ã«AdministratorAccessã‚’ä»˜ä¸ã™ã‚‹",
      "S3ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°ã‚’æœ‰åŠ¹åŒ–ã™ã‚‹",
      "CloudFrontã§æš—å·åŒ–ã™ã‚‹ ğŸ¤£"
    ],
    en: [
      "Use AWS KMS managed keys âœ…",
      "Attach AdministratorAccess to IAM users",
      "Enable S3 versioning",
      "Encrypt with CloudFront ğŸ¤£"
    ]
  }
};

ReactDOM.render(
  <Question data={quizData} onAnswer={idx => alert(\"é¸æŠè‚¢: \" + idx)} />,
  document.getElementById(\"aws-quiz-root\")
);
</script>
{% endverbatim %}

<style>
.question-container { margin: 1em 0; }
.lang-toggle button { margin-right: 0.5em; }
.question-text { font-weight: bold; margin-bottom: 1em; }
ul { list-style: none; padding: 0; }
li { padding: 0.5em; border-radius: 4px; }
li.selected { background: #ffe066; font-weight: bold; }
</style>
{% endblock %}