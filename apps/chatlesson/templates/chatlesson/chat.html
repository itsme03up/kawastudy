{% extends 'base.html' %}
{% load static %}

{% block title %}川田先生とのチャット - Kawada Study{% endblock %}

{% block extra_css %}
<style>
    html, body {
        font-family: "Noto Sans JP", "Helvetica Neue", Arial, sans-serif;
        overflow: hidden;
        height: 100vh;
        margin: 0;
        padding: 0;
    }
    .main-layout-chat {
        display: flex;
        height: calc(100vh - 112px); /* ヘッダー・フッター分を除く */
        width: 100vw;
        margin-top: 56px;
        margin-bottom: 56px;
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        position: relative;
    }
    .character-area {
        flex: 1;
        background-color: #f0f4f8;
        padding: 2rem;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        border-right: 1px solid #ddd;
        height: 100%;
    }
    .chat-area {
        flex: 2;
        display: flex;
        flex-direction: column;
        height: 100%;
    }
    #chat-root {
        height: 100%;
        display: flex;
        flex-direction: column;
        background: linear-gradient(to bottom, #e9eff5, #d5e0f0);
        margin: 0;
        padding: 0;
    }
    /* ...既存のチャットUI用CSS... */
</style>
{% endblock %}

{% block content %}
<div class="main-layout-chat">
    <!-- 左側: 川田キャライメージ表示エリア -->
    <div class="character-area">
        <img id="character-image" src="{% static 'img/kawada.png' %}" alt="川田先生" class="img-fluid mb-4" style="max-width: 350px; border-radius: 50%;">
        <h4 class="card-title" id="character-name">川田</h4>
        <p class="card-text text-muted">ベテランエンジニア</p>
        <hr class="my-4" style="width: 80%;">
        <div id="kawada-status" class="text-center">
            <div class="spinner-border spinner-border-sm text-primary" role="status" style="display: none;">
                <span class="visually-hidden">Loading...</span>
            </div>
            <span id="kawada-status-text">待機中...</span>
        </div>
    </div>
    <!-- 右側: チャットエリア -->
    <div class="chat-area">
        <div id="chat-root">
            <!-- Reactコンポーネントがここにマウントされます -->
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/react/chatlesson.bundle.js' %}"></script>
{% endblock %}
